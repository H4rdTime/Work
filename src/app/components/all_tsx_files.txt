// src/app/components/Advantages.tsx
'use client'
import React from 'react'
import Image from 'next/image'; // Добавить в начале файла

const Advantages = () => {
    const advantages = [
        {
            title: 'Комплексное водоснабжение',
            subtitle: 'Полное обеспечение систем водоснабжения',
            image: '/images/advantage5.png',
            content: (
                <>
                    <p className="mb-2 text-left">
                      Мы выполняем полный комплекс работ по водоснабжению загородного дома.
                    </p>
                    <ul className="list-disc pl-5 space-y-2 text-left">
                        <li>Бурение скважин на воду.</li>
                        <li>Обустройство скважины, монтаж водоприемного узла.</li>
                        <li>Установка системы очистки воды.</li>
                    </ul>
                </>
            )
        },
        {
            title: 'Гарантия',
            subtitle: '«Полная ответственность за каждый метр в Карелии»',
            image: '/images/advantage1.png',
            content: (
                <>
                    <p className="mb-2 text-left">
                      Мы уверены в качестве работ и материалов в Петрозаводске и Республике Карелия, поэтому даем максимальную гарантию на бурение и обустройство скважин.
                    </p>
                    <ul className="list-disc pl-5 space-y-2 text-left">
                        <li>Бесплатное устранение любых дефектов, связанных с нашей работой.</li>
                        <li>Гарантия распространяется на герметичность, дебет воды и оборудование.</li>
                        <li>Мы уверены в качестве работ и материалов, поэтому даем максимальную гарантию на бурение и обустройство скважин.</li>
                    </ul>
                </>
            )
        },
        {
            title: 'Собственная техника',
            subtitle: '«Контроль сроков и качества»',
            image: '/images/advantage51.png',
            content: (
                <>
                    <p className="mb-2 text-left">
                      2 единицы современной техники в нашем парке — никаких задержек из-за подрядчиков!
                    </p>
                    <ul className="list-disc pl-5 space-y-2 text-left">
                        <li>Буровые установки УРБ 2А2, малогабаритные установки для сложных участков.</li>
                        <li>Транспорт для логистики (КАМАЗ-вездеходы, манипуляторы).</li>
                        <li>Регулярный техосмотр и обслуживание — снижаем риски поломок.</li>
                    </ul>
                </>
            )
        },
        {
            title: 'Экологичный подход',
            subtitle: '«Бережем ваш участок и природу»',
            image: '/images/advantage3.png',
            content: (
                <>
                    <p className="mb-2 text-left">
                      Используем технологии, которые минимизируют воздействие на окружающую среду:
                    </p>
                    <ul className="list-disc pl-5 space-y-2 text-left">
                        <li>Утилизируем буровой шлам и техническую воду.</li>
                        <li>Не применяем токсичные реагенты.</li>
                        <li>После работ убираем территорию: никаких следов от техники!</li>
                    </ul>
                </>
            )
        },
        {
            title: 'Гарантированные сроки',
            subtitle: '«Четко по графику — или компенсируем простой»',
            image: '/images/advantage4.png',
            content: (
                <>
                    <p className="mb-2 text-left">
                      Даже в сложных условиях (плотный грунт, плохая погода) соблюдаем договоренности:
                    </p>
                    <ul className="list-disc pl-5 space-y-2 text-left">
                        <li>Фиксируем сроки в договоре.</li>
                        <li>При задержке по нашей вине — компенсация 1% от суммы за каждый день.</li>
                        <li>Ежедневные отчеты о прогрессе работ.</li>
                    </ul>
                </>
            )
        },
        {
            title: 'Специальные предложения',
            subtitle: 'Льготное обслуживание для пенсионеров и участников СВО',
            image: '/images/advantage6.png',
            content: (
                <>
                    <p className="mb-2 text-left">
                      Мы предоставляем скидки для пенсионеров и участников СВО, стремясь сделать наши услуги более доступными и поддержать социально значимые группы.
                    </p>
                    <ul className="list-disc pl-5 space-y-2 text-left">
                        <li>Скидки на все виды работ.</li>
                        <li>Индивидуальный подход к каждому клиенту.</li>
                    </ul>
                </>
            )
        },
    ]

    return (
        <section className="container mx-auto px-4 py-4">
            <div className="border-b border-black border-opacity-10 mb-4"></div>

            <h2 className="text-3xl md:text-4xl font-bold text-[#218CE9] text-center mb-8 md:mb-12">
                НАШИ ПРЕИМУЩЕСТВА
            </h2>

            <div className="grid grid-cols-2 gap-4 min-[480px]:gap-6 md:gap-8">
                {advantages.map((item, index) => (
                    <article
                        key={index}
                        aria-labelledby={`advantage-${index}`}
                        className="group bg-[#F5F5F5] rounded-xl p-4 md:p-6 shadow-lg"
                    >
                        {/* Кружок с изображением */}
                        <div className="w-20 h-20 md:w-32 md:h-32 mx-auto mb-4 md:mb-6 rounded-full overflow-hidden border-4 border-white shadow-lg">
                            <Image
                                src={item.image}
                                alt={item.title}
                                width={128}
                                height={128}
                                className="w-full h-full object-cover"
                            />
                        </div>

                        {/* Основной контент */}
                        <div className="text-center">
                            <h3
                                id={`advantage-${index}`}
                                className="text-base md:text-xl lg:text-2xl font-bold text-[#218CE9] mb-1 md:mb-2"
                            >
                                {item.title}
                            </h3>
                            <p className="text-xs md:text-sm text-[#666] italic mb-2 md:mb-4">
                                {item.subtitle}
                            </p>

                            {/* Дополнительный контент */}
                            <div className="max-h-0 overflow-hidden transition-all duration-500 group-hover:max-h-[500px]">
                                <div className="pt-2 md:pt-4 border-t border-[#218CE9]/20">
                                    <div className="text-xs md:text-sm">
                                        {item.content}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </article>
                ))}
            </div>
        </section>
    )
}

export default Advantages
// app/components/ApplicationForm.tsx
"use client";
import { useState } from "react";

export default function ApplicationForm() {
  const [formData, setFormData] = useState({
    fullName: "",
    phone: "",
    email: "",
    address: "",
  });

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    try {
      const response = await fetch("http://localhost:1337/api/applications", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ data: formData }),
      });
      if (response.ok) alert("Заявка отправлена!");
    } catch (error) {
      console.error("Ошибка:", error);
    }
  };

  return (
    <form onSubmit={handleSubmit} className="space-y-4">
      <input
        type="text"
        placeholder="ФИО"
        required
        onChange={(e) => setFormData({ ...formData, fullName: e.target.value })}
      />
      <input
        type="tel"
        placeholder="Телефон"
        required
        onChange={(e) => setFormData({ ...formData, phone: e.target.value })}
      />
      <input
        type="email"
        placeholder="Email"
        onChange={(e) => setFormData({ ...formData, email: e.target.value })}
      />
      <textarea
        placeholder="Адрес"
        required
        onChange={(e) => setFormData({ ...formData, address: e.target.value })}
      />
      <button type="submit" className="bg-blue-600 text-white p-2 rounded">
        Отправить
      </button>
    </form>
  );
}// app/components/BlogPreview.tsx
'use client'
import { useEffect, useState } from 'react';
import { supabase } from '@/lib/supabase';
import Link from 'next/link';
import Image from 'next/image';

interface Category {
    id: number;
    slug: string;
    title: string;
    description?: string;
    image_url?: string;
}

export default function BlogPreview() {
    const [categories, setCategories] = useState<Category[] | null>(null);
    const [loading, setLoading] = useState(true);

    useEffect(() => {
        async function fetchCategories() {
            const { data } = await supabase
                .from('blog_categories')
                .select('id, slug, title, description, image_url')
                .limit(3);
            setCategories(data);
            setLoading(false);
        }
        fetchCategories();
    }, []);

    if (loading) {
        return <div>Загрузка превью блога...</div>;
    }

    return (
        <div className="container mx-auto px-4 py-12 ">
            <section className='bg-[#F5F5F5] rounded-xl mx-auto px-4 py-8'>
                <div className="text-center mb-8">
                    <h2 className="text-3xl md:text-4xl font-bold text-[#218CE9]">
                        Полезные статьи о бурении и воде
                    </h2>
                </div>
                {categories && categories.length > 0 ? (
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                        {categories.map((category) => (
                            <Link
                                key={category.id}
                                href={`/blog/${category.slug}`}
                                className="group bg-white rounded-xl shadow-md hover:shadow-lg transition-shadow overflow-hidden"
                            >
                                <div className="relative h-48 w-full">
                                    {category.image_url ? (
                                        <Image
                                            src={category.image_url}
                                            alt={category.title}
                                            fill
                                            className="object-cover transition-transform duration-500 group-hover:scale-105"
                                            sizes="(max-width: 768px) 100vw, 33vw"
                                        />
                                    ) : (
                                        <div className="w-full h-full bg-gray-100 flex items-center justify-center">
                                            <span className="text-gray-400">Нет изображения</span>
                                        </div>
                                    )}
                                    <div className="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent" />
                                </div>
                                <div className="p-4">
                                    <h3 className="text-lg font-bold text-[#218CE9] mb-2">
                                        {category.title}
                                    </h3>
                                    {category.description && (
                                        <p className="text-gray-600 line-clamp-3">
                                            {category.description}
                                        </p>
                                    )}
                                </div>
                            </Link>
                        ))}
                    </div>
                ) : (
                    <div className="text-center text-red-500">
                        Записи блога временно недоступны
                    </div>
                )}
                <div className="text-center mt-6">
                    <Link href="/blog" className="text-[#218CE9] hover:underline">
                        Смотреть все записи
                    </Link>
                </div>
            </section>
        </div>

    );
}
// BurgerMenu.tsx
"use client";
import { useState } from "react";
import Link from "next/link";
import { FaInstagram, FaTelegram, FaVk } from "react-icons/fa";

interface NavLink {
  href: string;
  text: string;
}

interface BurgerMenuProps {
  navLinks: NavLink[];
}

const BurgerMenu: React.FC<BurgerMenuProps> = ({ navLinks }) => {
  const [isOpen, setIsOpen] = useState(false);

  const toggleMenu = () => setIsOpen(!isOpen);
  const closeMenu = () => setIsOpen(false);

  return (
    <div className="relative">
      <button
        onClick={toggleMenu}
        className="p-2 focus:outline-none text-[#218CE9] hover:text-[#1a6fb9] transition-colors"
      >
        <svg
          className="w-6 h-6"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeWidth="2"
            d="M4 6h16M4 12h16M4 18h16"
          />
        </svg>
      </button>

      {isOpen && (
        <div className="fixed inset-0 z-40 bg-black/50 lg:hidden" onClick={closeMenu}>
          <div
            className="absolute left-0 top-0 h-full w-64 bg-white shadow-lg"
            onClick={(e) => e.stopPropagation()}
          >
            <div className="p-4 border-b">
              <button
                onClick={closeMenu}
                className="text-gray-500 hover:text-[#218CE9] transition-colors"
              >
                ✕
              </button>
            </div>

            <ul className="py-2">
              {navLinks.map((link) => (
                <li key={link.href}>
                  <Link
                    href={link.href}
                    onClick={closeMenu}
                    className="block px-6 py-3 text-gray-700 hover:bg-[#218CE9]/10 hover:text-[#218CE9] transition-colors"
                  >
                    {link.text}
                  </Link>
                </li>
              ))}
              <li>
                <Link
                  href="/contacts"
                  onClick={closeMenu}
                  className="block px-6 py-3 mt-2 bg-[#218CE9] text-white hover:bg-[#1a6fb9]"
                >
                  Оставить заявку
                </Link>
              </li>
            </ul>

            <div className="flex justify-between gap-4 mt-4 px-6">
              <a href="https://vk.com/aquaservice_ptz" target="_blank" rel="noopener" className="text-[#218CE9] hover:text-[#1a6fb9]">
                <FaVk className="w-10 h-10" />
              </a>
              <a href="https://telegram.org" target="_blank" rel="noopener" className="text-[#218CE9] hover:text-[#1a6fb9]">
                <FaTelegram className="w-10 h-10" />
              </a>
              <a href="https://www.instagram.com/aquaservice.ptz/" target="_blank" rel="noopener" className="text-[#218CE9] hover:text-[#1a6fb9]">
                <FaInstagram className="w-10 h-10" />
              </a>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default BurgerMenu;// components/CategoryCard.tsx
'use client'
import Image from "next/image";

interface CategoryCardProps {
  category: {
    id: number;
    name: string;
    image_url: string;
    description: string;
  };
}

export default function CategoryCard({ category }: CategoryCardProps) {
  return (
    <a
      href={`/equipment/${encodeURIComponent(category.name)}`}
      className="group relative block overflow-hidden rounded-xl shadow-md hover:shadow-lg transition-transform duration-300 hover:-translate-y-2"
    >
      <div className="relative h-48 w-full">
        <Image
          src={category.image_url}
          alt={category.name}
          fill
          className="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
          sizes="(max-width: 768px) 100vw, 50vw"
          priority
        />
        <div className="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent" />
      </div>

      <div className="absolute bottom-0 left-0 right-0 p-4 text-white">
        <h2 className="text-xl font-bold mb-1 drop-shadow-lg">
          {category.name}
        </h2>
        <p className="text-sm line-clamp-2 opacity-90 group-hover:opacity-100 transition-opacity">
          {category.description}
        </p>
      </div>
    </a>
  );
}'use client'
import Image from "next/image";
import { useEffect, useState } from "react";
import { getBlurDataURL } from "@/lib/image-utils";
import Link from 'next/link';

interface EquipmentCardProps {
  equipment: {
    id: number;
    title: string;
    description: string;
    price: number;
    image_url: string;
    category: string;
    slug: string;
  };
}

export default function EquipmentCard({ equipment }: EquipmentCardProps) {
  const [blurData, setBlurData] = useState<string>("");

  useEffect(() => {
    getBlurDataURL(equipment.image_url)
      .then(setBlurData)
      .catch((error) => {
        console.error("Ошибка загрузки blurData:", error);
        setBlurData(""); 
      });
  }, [equipment.image_url]);

  return (
    <Link 
      href={`/equipment/${encodeURIComponent(equipment.category)}/${equipment.slug}`}
      className="group block bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow p-6 h-full"
    >
      <div className="relative h-48 w-full mb-4 flex-shrink-0">
        <Image
          src={equipment.image_url}
          alt={equipment.title}
          fill
          className="object-cover rounded-lg transition-transform group-hover:scale-105"
          sizes="(max-width: 768px) 100vw, 33vw"
          loading="lazy"
          {...(blurData ? { placeholder: "blur", blurDataURL: blurData } : {})}
        />
      </div>
      
      <h3 className="text-xl font-bold text-[#218CE9] mb-2 group-hover:text-[#1a6fb9] transition-colors">
        {equipment.title}
      </h3>
      
      <p className="text-gray-600 mb-4 flex-grow">{equipment.description}</p>
      
      <div className="flex justify-between items-center mt-auto">
        <span className="font-bold text-[#218CE9]">
          от {equipment.price.toLocaleString('ru-RU')} ₽
        </span>
        <span className="text-sm bg-blue-100 text-[#218CE9] px-3 py-1 rounded-full">
          {equipment.category}
        </span>
      </div>
    </Link>
  );
}// components/EquipmentCategoryCard.tsx
import Link from 'next/link';
import Image from 'next/image';

interface EquipmentCategoryCardProps {
  category: {
    name: string;
    image_url: string | null;
    description?: string;
  };
}

export default function EquipmentCategoryCard({ category }: EquipmentCategoryCardProps) {
  return (
    <Link
      href={`/equipment/${encodeURIComponent(category.name)}`}
      className="bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow overflow-hidden"
    >
      <div className="relative h-48 w-full">
        {
          category.image_url ? (
            <Image
              src={category.image_url}
              alt={category.name}
              fill
              className="object-cover"
              sizes="(max-width: 768px) 100vw, 33vw"
            />
          ) : (
            <div className="w-full h-full bg-gray-100 flex items-center justify-center">
              <span className="text-gray-400">Нет изображения</span>
            </div>
          )
        }
      </div>

      <div className="p-6">
        <h2 className="text-xl font-bold text-[#218CE9] mb-2">
          {category.name}
        </h2>
        {category.description && (
          <p className="text-gray-600 line-clamp-3">
            {category.description}
          </p>
        )}
      </div>
    </Link>
  );
}// components/EquipmentSlider.tsx - Слайдер оборудования на главной (app/page.tsx)
"use client";
import React, { useEffect, useState } from "react";
import useEmblaCarousel from "embla-carousel-react";
import Autoplay from "embla-carousel-autoplay";
import { WheelGesturesPlugin } from "embla-carousel-wheel-gestures";
import Image from "next/image";
import Link from "next/link";
import { supabase } from '@/lib/supabase';
import { useRouter } from 'next/navigation';

// Тип данных для оборудования
interface Equipment {
  id: string;
  title: string;
  description: string;
  price: string;
  image_url: string;
  category: string;
  slug: string;
}

const EquipmentSlider = () => {
  const router = useRouter(); // Инициализируем роутер

  // Состояния компонента
  const [equipment, setEquipment] = useState<Equipment[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const [selectedIndex, setSelectedIndex] = useState(0);

  // Инициализация слайдера
  const [emblaRef, emblaApi] = useEmblaCarousel(
    {
      loop: true,
      align: "start",
      breakpoints: {
        "(min-width: 640px)": { slidesToScroll: 1 },
        "(min-width: 1024px)": { slidesToScroll: 1 }
      }
    },
    [WheelGesturesPlugin(), Autoplay({ delay: 5000, stopOnMouseEnter: true, stopOnInteraction: false })]
  );

  // Загрузка данных
  useEffect(() => {
    const fetchEquipment = async () => {
      try {
        const { data, error } = await supabase
          .from('equipment')
          .select('*')
          .order('price', { ascending: true });

        if (error) throw error;
        setEquipment(data || []);
      } catch (err) {
        setError('Ошибка загрузки оборудования');
        console.error('Ошибка:', err);
      } finally {
        setLoading(false);
      }
    };

    fetchEquipment();
  }, []);

  // Обработчик изменения слайда
  useEffect(() => {
    if (!emblaApi) return;
    const updateIndex = () => setSelectedIndex(emblaApi.selectedScrollSnap());
    emblaApi.on("select", updateIndex);
    return () => {
      emblaApi.off("select", updateIndex);
    };
  }, [emblaApi]);

  // Состояния загрузки
  if (loading) {
    return (
      <div className="text-center py-12">
        <div className="animate-pulse bg-gray-200 h-64 rounded-xl w-full max-w-4xl mx-auto" />
      </div>
    );
  }

  // Обработка ошибок
  if (error) {
    return (
      <div className="text-red-500 text-center py-8">
        {error}. Обновите страницу
      </div>
    );
  }

  return (
    <section className="px-4 py-8 container mx-auto">
      <div className="border-b border-black/10 mb-8"></div>

      <h2 className="text-center font-bold text-3xl text-[#218CE9] mb-8">
        КАКОЕ ОБОРУДОВАНИЕ У НАС ЗАКАЗЫВАЮТ
      </h2>

      <div className="flex items-center gap-4">
        {/* Навигационные кнопки */}
        <button
          onClick={() => emblaApi?.scrollPrev()}
          className="hidden md:flex items-center justify-center w-10 h-10 rounded-full bg-white shadow-lg hover:scale-110 transition-transform"
        >
          <svg className="w-6 h-6 text-[#218CE9]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 19l-7-7 7-7" />
          </svg>
        </button>

        {/* Контейнер слайдов */}
        <div className="embla overflow-hidden flex-1" ref={emblaRef}>
          <div className="py-4 embla__container flex gap-3">
            {equipment.map((item) => (
              <div
                className="embla__slide flex-[0_0_280px]"
                key={item.id}
              >
                <article className="bg-white rounded-xl shadow-md hover:shadow-lg transition-shadow h-full flex flex-col">
                  <div className="relative h-48">
                    <Image
                      src={item.image_url}
                      alt={item.title}
                      fill
                      className="object-cover rounded-t-xl"
                      sizes="(max-width: 768px) 100vw, 50vw"
                    />
                  </div>

                  <div className="p-4 flex flex-col flex-grow">
                    <h3 className="text-xl font-bold text-[#218CE9] mb-2">
                      {item.title}
                    </h3>

                    <p className="text-gray-600 text-sm mb-4 flex-grow">
                      {item.description}
                    </p>

                    <div className="mt-auto">
                      <p className="text-lg font-bold text-[#218CE9] mb-3">
                        от {item.price} ₽
                      </p>
                      <Link
                        href={`/equipment/${item.category}/${item.slug}`}
                        className="block w-full bg-[#218CE9] text-white py-2 rounded-lg hover:bg-[#1a6fb9] transition-colors text-center"
                        onMouseEnter={() => router.prefetch(`/equipment/${item.category}/${item.slug}`)}
                      >
                        Подробнее
                      </Link>
                    </div>
                  </div>
                </article>
              </div>
            ))}
          </div>
        </div>

        <button
          onClick={() => emblaApi?.scrollNext()}
          className="hidden md:flex items-center justify-center w-10 h-10 rounded-full bg-white shadow-lg hover:scale-110 transition-transform"
        >
          <svg className="w-6 h-6 text-[#218CE9]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 5l7 7-7 7" />
          </svg>
        </button>
      </div>

      {/* Пагинация */}
      <div className="flex justify-center gap-2 mt-6">
        {equipment.map((_, index) => (
          <button
            key={index}
            onClick={() => emblaApi?.scrollTo(index)}
            className={`w-2 h-2 rounded-full transition-opacity ${selectedIndex === index ? 'opacity-100' : 'opacity-30'
              } bg-[#218CE9]`}
          />
        ))}
      </div>

      {/* Кнопка "Посмотреть все" */}
      <div className="flex justify-center mt-8">
        <Link
          href="/equipment"
          className="bg-[#218CE9] text-white px-6 py-2 rounded-full hover:bg-[#1a6fb9] transition-colors"
        >
          Весь каталог →
        </Link>
      </div>
    </section>
  );
};

export default EquipmentSlider;// src/app/components/Footer.tsx
'use client'
import React from 'react'
import Link from 'next/link'
import { FiPhone, FiMapPin, FiMail, FiClock } from 'react-icons/fi'
import { FaVk, FaTelegram, FaInstagram } from 'react-icons/fa'
const Footer = () => {
  return (
    <footer className="w-full bg-white border-t border-gray-100 mt-16">
      <div className="container mx-auto px-4 py-12 ">
        {/* Основные разделы */}
        <div className="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-3 justify-items-start md:justify-items-center gap-8 mb-12 pl-4 md:pl-0">          {/* Контакты */}
          <div className="">
            <h3 className="text-xl font-bold text-[#218CE9] mb-4">Контакты</h3>
            <div className="space-y-3">
              <div className="flex items-center gap-3">
                <FiMapPin className="w-5 h-5 text-[#218CE9] mt-1" />
                <div>
                  <p className="text-gray-600">
                    г. Петрозаводск, <br /> ул. Коммунистов, 50/2
                  </p>
                </div>
              </div>

              <div className="flex items-center gap-3">
                <FiPhone className="w-5 h-5 text-[#218CE9]" />
                <div className="flex gap-4">
                  <a href="tel:8142270545" className="text-gray-600 hover:text-[#218CE9]">27-05-45</a>
                  <a href="tel:8142330090" className="text-gray-600 hover:text-[#218CE9]">33-00-90</a>
                </div>
              </div>

              <div className="flex items-center gap-3">
                <FiMail className="w-5 h-5 text-[#218CE9]" />
                <a href="mailto:info@aqua-ptz.ru" className="text-gray-600 hover:text-[#218CE9]">
                  info@aqua-ptz.ru
                </a>
              </div>

              <div className="flex items-center gap-3">
                <FiClock className="w-5 h-5 text-[#218CE9]" />
                <p className="text-gray-600">пн-пт: 09:00–18:00</p>
              </div>
            </div>
          </div>

          {/* Навигация */}
          <div>
            <h3 className="text-xl font-bold text-[#218CE9] mb-4">Навигация</h3>
            <ul className="space-y-3">
              {[
                { href: '/', text: 'Главная' },
                { href: '/services', text: 'Услуги' },
                { href: '/equipment', text: 'Оборудование' },
                { href: '/blog', text: 'Блог' },
                { href: '/contacts', text: 'Контакты' },
              ].map((item) => (
                <li key={item.href}>
                  <Link href={item.href} className="text-gray-600 hover:text-[#218CE9] transition-colors">
                    {item.text}
                  </Link>
                </li>
              ))}
            </ul>
          </div>

          {/* Документы */}
          {/* <div>
            <h3 className="text-xl font-bold text-[#218CE9] mb-4">Документы</h3>
            <ul className="space-y-3">
              {[
                { href: '/privacy', text: 'Политика конфиденциальности' },
                { href: '/terms', text: 'Пользовательское соглашение' },
                { href: '/guarantee', text: 'Гарантии и возврат' },
                { href: '/license', text: 'Лицензии' },
              ].map((item) => (
                <li key={item.href}>
                  <Link href={item.href} className="text-gray-600 hover:text-[#218CE9] transition-colors">
                    {item.text}
                  </Link>
                </li>
              ))}
            </ul>
          </div> */}

          {/* Соцсети */}
          <div>
            <h3 className="text-xl font-bold text-[#218CE9] mb-4">Мы в соцсетях</h3>
            <div className="flex gap-4">
              {[
                { icon: <FaVk className="w-10 h-10" />, href: 'https://vk.com/aquaservice_ptz', label: 'ВКонтакте' },
                { icon: <FaTelegram className="w-10 h-10" />, href: '/telegram', label: 'Telegram' },
                { icon: <FaInstagram className="w-10 h-10" />, href: 'https://www.instagram.com/aquaservice.ptz/', label: 'Instagram' },
              ].map((item) => (
                <a
                  key={item.href}
                  href={item.href}
                  className="text-2xl text-gray-600 hover:text-[#218CE9] transition-colors"
                  aria-label={item.label}
                >
                  {item.icon}
                </a>
              ))}
            </div>
          </div>
        </div>


        {/* Копирайт */}
        <div className="border-t border-black border-opacity-10 pt-6 text-center">
          <p className="text-gray-500 text-sm">
            © 2000-{new Date().getFullYear()} Компания «АкваСервис». Все права защищены
          </p>
        </div>
      </div>
    </footer>
  )
}

export default Footer'use client'
import { Swiper, SwiperSlide } from 'swiper/react'
import { Autoplay, EffectFade, Navigation, Pagination } from 'swiper/modules'
import 'swiper/css'
import 'swiper/css/effect-fade'
import 'swiper/css/navigation'
import 'swiper/css/pagination'
import Image from 'next/image'
import { FiCheckCircle, FiArrowDown } from 'react-icons/fi'

const cities = [
  'Петрозаводск', 'Кондопога', 'Медвежьегорск',
  'Пряжа', 'Шуя', 'Деревянное',
  'Сортавала', 'Лахденпохья', 'Питкяранта',
  'Олонец', 'Суоярви', 'Сегежа'
];

const FullscreenSlider = ({
  scrollToForm,
  scrollToMap // Добавляем новый пропс
}: {
  scrollToForm: () => void;
  scrollToMap: () => void;
}) => {
  return (
    <div className="relative">
      <Swiper
        modules={[Autoplay, EffectFade, Navigation, Pagination]}
        effect="fade"
        speed={1200}
        navigation
        pagination={{ clickable: true }}
        autoplay={{ delay: 10000, pauseOnMouseEnter: true }}
        className="h-screen w-full"
      >
        {/* Слайд 1: Главный */}
        <SwiperSlide className="relative bg-gradient-to-b from-blue-900 to-cyan-900 flex items-center">
          <div className="container mx-auto h-full flex flex-col items-center px-4 py-12">
            <div className="w-full max-w-6xl mx-auto text-center">
              {/* Заголовок */}
              <h1 className="text-3xl xs:text-4xl sm:text-5xl md:text-6xl font-bold uppercase mb-6 text-white">
                БУРЕНИЕ СКВАЖИН В РЕСПУБЛИКЕ КАРЕЛИЯ
                <span className="block text-lg xs:text-xl sm:text-2xl md:text-3xl font-normal mt-3">
                  С ГАРАНТИЕЙ 10 ЛЕТ
                </span>
              </h1>

              {/* Мобильный вариант */}
              <div className="md:hidden space-y-6 mb-8">
                {/* Преимущества */}
                {[
                  'Полный цикл работ "под ключ"',
                  'Лицензированное оборудование',
                  'Сертифицированные специалисты'
                ].map((item, i) => (
                  <div
                    key={i}
                    className="bg-white/10 p-4 rounded-xl backdrop-blur-sm flex items-center gap-3"
                  >
                    <FiCheckCircle className="text-2xl text-[#218CE9] flex-shrink-0" />
                    <span className="text-lg text-white/90">{item}</span>
                  </div>
                ))}

                {/* Автоматическая прокрутка городов */}
                <div className="bg-white/5 p-6 rounded-2xl backdrop-blur-sm">
                  <h2 className="text-xl font-bold text-white mb-4 text-center">
                    Основные населенные пункты:
                  </h2>
                  <div className="overflow-hidden">
                    <div className="flex animate-infinite-scroll">
                      {[...cities, ...cities].map((city, i) => (
                        <div
                          key={i}
                          className="bg-white/10 px-4 py-2 rounded-lg text-white/90 text-sm flex-shrink-0 mr-2"
                        >
                          {city}
                        </div>
                      ))}
                    </div>
                  </div>
                </div>
                <button
                  onClick={scrollToForm}
                  className="w-full bg-[#218CE9] text-white py-3 rounded-full font-bold hover:bg-[#1a6fb9] flex items-center justify-center gap-2"
                >
                  <FiArrowDown className="animate-bounce" />
                  Оставить заявку
                </button>
              </div>

              {/* Desktop вариант */}
              <div className="hidden md:grid md:grid-cols-2 gap-8 mb-8">
                {/* Левая колонка */}
                <div className="space-y-6">
                  <div className="space-y-4">
                    {[
                      'Полный цикл работ "под ключ"',
                      'Лицензированное оборудование',
                      'Сертифицированные специалисты'
                    ].map((item, i) => (
                      <div
                        key={i}
                        className="bg-white/10 p-4 rounded-xl backdrop-blur-sm flex items-center gap-3"
                      >
                        <FiCheckCircle className="text-2xl text-[#218CE9] flex-shrink-0" />
                        <span className="text-lg text-white/90">{item}</span>
                      </div>
                    ))}
                  </div>

                  <div className="grid grid-cols-3 gap-3 text-center">
                    {[
                      { value: '15+', label: 'лет опыта' },
                      { value: '1,200+', label: 'скважин пробурено' },
                      { value: '98%', label: 'рекомендуют нас' }
                    ].map((item, i) => (
                      <div key={i} className="bg-white/10 p-4 rounded-xl">
                        <div className="text-2xl font-bold text-[#218CE9]">{item.value}</div>
                        <div className="text-sm text-white/80 mt-1">{item.label}</div>
                      </div>
                    ))}
                  </div>

                  <button
                    onClick={scrollToForm}
                    className="bg-[#218CE9] hover:bg-[#1666b3] text-white px-8 py-4 rounded-full 
                       w-full flex items-center justify-center gap-2 text-lg font-semibold
                       transition-all duration-300"
                  >
                    <FiArrowDown className="text-xl animate-bounce" />
                    Заказать звонок
                  </button>
                </div>

                {/* Правая колонка */}
                <div className="bg-white/5 p-6 rounded-2xl backdrop-blur-sm">
                  <h2 className="text-xl font-bold text-white mb-4 text-center">
                    Основные населенные пункты:
                  </h2>
                  <div className="flex flex-wrap gap-2 max-h-[400px] overflow-y-auto">
                    {cities.map((city, i) => (
                      <div
                        key={i}
                        className="bg-white/10 px-4 py-2 rounded-lg text-white/90 text-sm"
                      >
                        {city}
                      </div>
                    ))}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </SwiperSlide>


        {/* Слайд 2: Услуги */}
        <SwiperSlide className="relative bg-gradient-to-br from-[#218CE9] to-cyan-400">
          <div className="absolute inset-0 opacity-15 z-0">
            <svg viewBox="0 0 500 200" className="w-full h-full" preserveAspectRatio="none">
              <path fill="currentColor" d="M0 120 Q 125 60 250 120 T 500 120 L500 0 0 0" className="text-white">
                <animate
                  attributeName="d"
                  dur="15s"
                  repeatCount="indefinite"
                  values="
            M0 120 Q 125 60 250 120 T 500 120 L500 0 0 0;
            M0 120 Q 125 180 250 120 T 500 120 L500 0 0 0;
            M0 120 Q 125 60 250 120 T 500 120 L500 0 0 0
          "
                />
              </path>
            </svg>
          </div>
          <div className="container mx-auto px-4 h-full flex items-center relative z-10">
            <div className="w-full h-[80vh] flex flex-col">
              <div className="space-y-4 md:space-y-8">
                <h2 className="text-3xl md:text-4xl lg:text-5xl font-bold text-center text-white drop-shadow-lg">
                  Наши ключевые услуги
                  <div className="mt-2 md:mt-4 text-lg md:text-xl lg:text-2xl font-light opacity-90">
                    Профессиональные решения для вашего комфорта
                  </div>
                </h2>
              </div>

              <div className="flex-1 overflow-y-auto pb-8 mt-4">
                <div className="grid grid-cols-1 xs:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4 lg:gap-6 px-2">
                  {[
                    {
                      icon: '/images/drilling.png',
                      title: 'Бурение скважин',
                      items: [
                        'Бурение на песчаный/гравийно-галечный грунт',
                        'Инженерно-геологические изыскания',
                        'Ремонт аварийных скважин',
                        'Устранение самоизлива'
                      ],
                      accent: 'bg-blue-100'
                    },
                    {
                      icon: '/images/water-pump.png',
                      title: 'Обустройство скважин',
                      items: [
                        'Подбор и монтаж насосов',
                        'Установка кессонов',
                        'Прокладка коммуникаций',
                        'Монтаж водоприемного узла'
                      ],
                      accent: 'bg-blue-100'
                    },
                    {
                      icon: '/images/save-water.png',
                      title: 'Водоочистка',
                      items: [
                        'Химический анализ воды',
                        'Подбор оборудования',
                        'Монтаж и наладка систем',
                        'Сервисное обслуживание'
                      ],
                      accent: 'bg-blue-100'
                    },
                    {
                      icon: '🚽',
                      title: 'Автономная канализация',
                      items: [
                        'Анализ местности',
                        'Подбор оборудования',
                        'Монтаж очистных сооружений',
                        'Обслуживание систем'
                      ],
                      accent: 'bg-blue-100'
                    }
                  ].map((service, index) => (
                    <div
                      key={index}
                      className="group p-4 md:p-6 bg-white rounded-xl md:rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 border-2 border-white/20 relative overflow-hidden"
                    >
                      <div className={`absolute top-0 left-0 w-full h-1.5 md:h-2 ${service.accent}`}></div>
                      <div className="mt-2">
                        <div className={`mb-3 md:mb-4 p-2 md:p-3 rounded-lg ${service.accent} inline-block shadow-sm md:shadow-md`}>
                          {service.icon.startsWith('/') ? (
                            <Image
                              src={service.icon}
                              alt={service.title}
                              width={40}
                              height={40}
                              className="w-10 h-10 object-contain"
                            />
                          ) : (
                            <span className="text-3xl md:text-4xl text-[#218CE9]">{service.icon}</span>
                          )}
                        </div>
                        <h3 className="text-lg md:text-xl font-bold text-gray-800 mb-2 md:mb-3">
                          {service.title}
                        </h3>
                        <ul className="space-y-1 md:space-y-2 text-gray-600">
                          {service.items.map((item, i) => (
                            <li key={i} className="flex items-start gap-2 text-xs md:text-sm leading-4 md:leading-5">
                              <span className="text-[#218CE9] text-base mt-0.5">•</span>
                              {item}
                            </li>
                          ))}
                        </ul>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          </div>
        </SwiperSlide>

        {/* Слайд 3: Галерея */}
        <SwiperSlide className="relative bg-gradient-to-br from-blue-50 to-cyan-50 min-h-screen">
          <div className="container mx-auto h-full flex flex-col justify-center py-8">
            <div className="text-center mb-6 px-4">
              <h2 className="text-3xl font-bold text-[#218CE9] mb-2">Реализованные проекты</h2>
              <p className="text-gray-600 text-base max-w-md mx-auto">
                Более 1200 успешных объектов по всей стране
              </p>
            </div>
            <div className="flex-1 overflow-y-auto px-4">
              <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                {[
                  {
                    id: 1,
                    title: "Система аэрации",
                    location: "СНТ Корба, Деревянское сельское поселение",
                    depth: null,
                    description: "Комплексная система очистки воды с напорной аэрацией",
                    image: "/images/aeration-system.webp"
                  },
                  {
                    id: 2,
                    title: "Станция биоочистки Юнилос Астра 5",
                    location: "с. Ведлозеро, Пряжинский р-н",
                    depth: null,
                    description: "Монтаж автономной канализации для частного дома",
                    image: "/images/unilos-setup.webp"
                  }
                  // {
                  //   id: 3,
                  //   title: "Очистные сооружения",
                  //   location: "Калужская область",
                  //   depth: null,
                  //   description: "Многоступенчатая система фильтрации для коттеджного поселка",
                  //   image: "/images/filtration-system.webp"
                  // },
                  // {
                  //   id: 4,
                  //   title: "Водоподготовка",
                  //   location: "Тверская область",
                  //   depth: null,
                  //   description: "Установка умягчителя и обезжелезивателя",
                  //   image: "/images/water-treatment.webp"
                  // },
                  // {
                  //   id: 5,
                  //   title: "Скважина на песок",
                  //   location: "Новгородская область",
                  //   depth: "32",
                  //   description: "Неглубокая скважина с насосной станцией",
                  //   image: "/images/sand-well.webp"
                  // },
                  // {
                  //   id: 6,
                  //   title: "Автоматизация",
                  //   location: "Владимирская область",
                  //   depth: null,
                  //   description: "Система умного управления водоснабжением",
                  //   image: "/images/automation-system.webp"
                  // }
                ].map((project) => (
                  <div key={project.id} className="relative aspect-square bg-white rounded-lg shadow-md overflow-hidden">
                    <Image
                      src={project.image}
                      alt={project.title}
                      width={400}
                      height={400}
                      className="object-cover w-full h-full"
                    />
                    <div className="absolute bottom-0 left-0 right-0 bg-white/90 p-3">
                      <h3 className="text-[#218CE9] font-bold text-sm mb-1">{project.title}</h3>
                      <p className="text-gray-600 text-xs mb-1">{project.description}</p>
                      <div className="flex justify-between items-center text-xs">
                        <span className="text-gray-600">{project.location}</span>
                        {project.depth && <span className="text-[#218CE9]">{project.depth}м</span>}
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            </div>
            <div className="text-center pt-6 sticky bottom-4 z-10">
              <button
                onClick={scrollToMap}
                className="bg-[#218CE9] text-white px-8 py-3 rounded-full hover:bg-[#1a6fb9] transition-colors">
                Все проекты
              </button>
            </div>
          </div>
        </SwiperSlide>
      </Swiper>
    </div>
  )
}

export default FullscreenSlider
// Header.tsx
'use client'
import React, { useState, useEffect, useCallback } from "react";
import Link from "next/link";
import BurgerMenu from "./BurgerMenu";
import { FiPhone, FiClock, FiMapPin, FiMail } from "react-icons/fi";
import Image from "next/image";
import { FaInstagram, FaTelegram, FaVk } from "react-icons/fa";

const Header = () => {
  const [showTopBar, setShowTopBar] = useState(true);
  const [lastScrollY, setLastScrollY] = useState(0);

  const controlNavbar = useCallback(() => {
    if (window.scrollY > lastScrollY && window.scrollY > 50) {
      setShowTopBar(false);
    } else {
      setShowTopBar(true);
    }
    setLastScrollY(window.scrollY);
  }, [lastScrollY]);

  useEffect(() => {
    window.addEventListener('scroll', controlNavbar);
    return () => {
      window.removeEventListener('scroll', controlNavbar);
    };
  }, [controlNavbar]);

  const navLinks = [
    { href: "/", text: "Главная" },
    { href: "/services", text: "Услуги" },
    { href: "/equipment", text: "Оборудование" },
    { href: "/about", text: "О нас" },
    { href: "/blog", text: "Блог" },
    { href: "/contacts", text: "Контакты" },
  ];

  return (
    <>
      {/* Верхняя контактная панель */}
      <div className={`sticky top-0 z-50 bg-white border-b transition-transform duration-300 ${showTopBar ? 'translate-y-0' : '-translate-y-full'}`}>
        <div className="container mx-auto px-4 py-1.5 flex flex-wrap items-center justify-center text-[11px] sm:text-sm text-gray-600 text-center gap-x-3 gap-y-1 md:justify-between">
          {/* Левый блок - Телефоны */}
          <div className="flex items-center space-x-1.5">
            <FiPhone className="w-3 h-3 sm:w-4 sm:h-4" />
            <div className="flex divide-x divide-gray-400">
              <a href="tel:8142270545" className="hover:text-[#218CE9] px-1.5">27-05-45</a>
              <a href="tel:8142330090" className="hover:text-[#218CE9] px-1.5">33-00-90</a>
            </div>
          </div>

          {/* Центр - Время работы */}
          <div className="flex items-center space-x-1.5">
            <FiClock className="w-3 h-3 sm:w-4 sm:h-4" />
            <span>пн-пт: 09:00–18:00</span>
          </div>

          {/* Правый блок - Адрес и почта */}
          <div className="flex items-center space-x-1.5">
            <FiMapPin className="w-3 h-3 sm:w-4 sm:h-4" />
            <span className="truncate  sm:max-w-none">ул. Коммунистов, 50/2</span>
          </div>

          <div className="flex items-center space-x-1.5">
            <FiMail className="w-3 h-3 sm:w-4 sm:h-4" />
            <a href="mailto:info@aqua-ptz.ru" className="hover:text-[#218CE9] truncate max-w-[120px]">info@aqua-ptz.ru</a>
          </div>

        </div>
      </div>
      {/* Основной header */}
      <header className="sticky top-0 z-50 bg-white shadow-md">
        <div className="container mx-auto px-4">
          <div className="flex items-center justify-between h-14 md:h-16">
            {/* Левая часть */}
            <div className="flex items-center gap-2 md:gap-4">
              <div className="lg:hidden">
                <BurgerMenu navLinks={navLinks} />
              </div>

              <Link href="/" className="relative h-10 w-28 md:h-12 md:w-40">
                <Image
                  src="/images/logo-aqu-servise.png"
                  alt="АкваСервис бурение скважин Петрозаводск"
                  fill
                  className="object-contain"
                  priority
                  sizes="(max-width: 160px) 100vw, 50vw"
                />
              </Link>
            </div>

            {/* Центральная навигация */}
            <nav
              aria-label="Основное меню"
              className="hidden lg:flex items-center gap-3 mx-3 flex-1 justify-end">
              {navLinks.map((link) => (
                <Link
                  key={link.href}
                  href={link.href}
                  className="text-clamp font-medium text-gray-700 hover:text-[#218CE9] transition-colors whitespace-nowrap"
                >
                  {link.text}
                </Link>
              ))}
            </nav>
            <div className="flex items-center gap-4 px-4">
              <a href="https://vk.com/aquaservice_ptz" target="_blank" rel="noopener" className="text-[#218CE9] hover:text-[#1a6fb9]">
                <FaVk className="w-7 h-7" />
              </a>
              <a href="https://telegram.org" target="_blank" rel="noopener" className="text-[#218CE9] hover:text-[#1a6fb9]">
                <FaTelegram className="w-7 h-7" />
              </a>
              <a href="https://www.instagram.com/aquaservice.ptz/" target="_blank" rel="noopener" className="text-[#218CE9] hover:text-[#1a6fb9]">
                <FaInstagram className="w-7 h-7" />
              </a>
            </div>
            {/* Кнопка заявки */}
            <div className="hidden items-center gap-3 lg:flex">
              <Link
                href="/contacts"
                className="bg-[#218CE9] text-white px-6 py-2 rounded-lg hover:bg-[#1a6fb9] transition-colors whitespace-nowrap "
              >
                Оставить заявку
              </Link>
            </div>

            
          </div>
        </div>
      </header>
    </>
  );
};

export default Header;import React from "react";
import Image from "next/image";

const Hero = () => {
    return (
        <section className="container mx-auto sm:hidden w-full p-4 bg-gradient-to-b from-blue-100 to-white text-left">
            {/* Заголовок */}
            <h2 className="text-[#218CE9] text-3xl font-bold mb-4 text-center">
                БУРЕНИЕ СКВАЖИН ПОД КЛЮЧ
            </h2>

            {/* Описание */}
            <p className="text-black text-opacity-60 text-sm max-w-2xl mx-auto mb-6">
                Профессиональное обустройство источников воды с гарантией 10 лет.
                Учитываем особенности вашего участка, чтобы обеспечить чистой водой круглый год.
            </p>

            {/* Кнопка */}
            <button className="w-full px-8 py-3 bg-[#218CE9] text-white text-base font-bold rounded-[62px] hover:bg-[#1a70c0] transition-colors duration-200">
                Заказать звонок
            </button>

            {/* Блок статистики */}
            <div className="max-w-xl mx-auto">
                <div className="grid grid-cols-2 gap-4 mt-5 mx-5">
                    <div className="text-left">
                        <div className="text-2xl font-bold text-[#218CE9]">15+</div>
                        <div className="text-xs text-gray-600 mt-1">
                            Лет опыта на рынке
                        </div>
                    </div>

                    <div className="text-left">
                        <div className="text-2xl font-bold text-[#218CE9]">
                            1,200+
                        </div>
                        <div className="text-xs text-gray-600 mt-1">
                            Скважин с 2010 года
                        </div>
                    </div>

                    <div className="col-span-2">
                        <div className="w-fit mx-auto text-center">
                            <div className="text-2xl font-bold text-[#218CE9]">98%</div>
                            <div className="text-xs text-gray-600 mt-1">
                                Клиентов рекомендуют нас
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <Image
                src="/images/hero.jpeg"
                alt="Статистика бурения"
                width={800}
                height={600}
                className="mt-5 w-full mx-auto rounded-[20px]"
                priority
            />
        </section>
    );
};

export default Hero;// components/LocalBusinessSchema.tsx
export const LocalBusinessSchema = () => (
    <script
      type="application/ld+json"
      dangerouslySetInnerHTML={{
        __html: JSON.stringify({
          "@context": "https://schema.org",
          "@type": "LocalBusiness",
          "name": "АкваСервис",
          "image": "https://aqua-service-karelia.ru/logo.jpg",
          "priceRange": "от 20 000 ₽",
          "address": {
            "@type": "PostalAddress",
            "streetAddress": "ул. Коммунистов, д.50, стр.2",
            "addressLocality": "Петрозаводск",
            "addressRegion": "Карелия",
            "postalCode": "185035"
          },
          "geo": {
            "@type": "GeoCoordinates",
            "latitude": 61.785474,
            "longitude": 34.346939
          }
        })
      }}
    />
  );'use client';

const MapIframe = () => {
  return (
    <div className="relative w-full aspect-video rounded-xl overflow-hidden shadow-xl">
      <iframe
        src="https://yandex.ru/map-widget/v1/?um=constructor%3Ad9c2ce5f3f93b1220e44539e76f2fae4b500f45a0280f9c51d63abbfd1dfa625&amp;source=constructor"
        className="absolute top-0 left-0 w-full h-full"
        title="Карта"
        loading="lazy"
      />
    </div>
  );
};

export default MapIframe;
'use client';

export const MapPlaceholder = () => {
  return (
    <div className="w-full bg-gray-100 rounded-xl animate-pulse h-96">
      <div className="flex items-center justify-center h-full text-gray-500">
        <svg className="w-12 h-12 animate-spin" fill="none" viewBox="0 0 24 24">
          <circle
            cx="12"
            cy="12"
            r="10"
            stroke="currentColor"
            strokeWidth="4"
            className="opacity-25"
          />
          <path
            fill="currentColor"
            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
            className="opacity-75"
          />
        </svg>
      </div>
    </div>
  );
};
'use client';
import dynamic from 'next/dynamic';
import { MapPlaceholder } from './MapPlaceholder';
import { useInView } from 'react-intersection-observer';

const MapIframe = dynamic(() => import('./MapIframe'), {
  ssr: false,
  loading: () => <MapPlaceholder />,
});

const MapSection = () => {
  const { ref, inView } = useInView({
    triggerOnce: true,
    threshold: 0.1,
  });

  return (
    <section
      ref={ref}
      id="map-section"
      className="w-full bg-white py-12 px-4 md:px-8"
    >
      <div className="container mx-auto mb-8 text-center">
        <h2 className="text-3xl font-bold text-[#218CE9]">
          Карта наших скважин по Республике Карелия
        </h2>
        <p className="mt-2 text-gray-600">
          Более 1200 реализованных проектов в разных районах республики
        </p>
      </div>
      {inView && <MapIframe />}
    </section>
  );
};

export default MapSection;// components/OptimizedImage.tsx
import Image from 'next/image';

export const OptimizedImage = ({ src, alt }: { src: string; alt: string }) => (
  <Image
    src={src}
    alt={alt}
    width={800}
    height={600}
    quality={85}
    loading="lazy"
    placeholder="blur"
    blurDataURL="data:image/png;base64,iVBORw0KGgo..."
    className="rounded-xl"
  />
);'use client'
import React, { useState } from 'react';

type CasingMaterial = 'steel' | 'plastic' | 'asbestos';

const PriceCalculator = () => {
    const [equipment, setEquipment] = useState(false);
    const [waterCleaning, setWaterCleaning] = useState(false);
    const [depth, setDepth] = useState(30);
    const [type, setType] = useState<'sand' | 'artesian'>('sand');
    const [casingMaterial, setCasingMaterial] = useState<'steel' | 'plastic' | 'asbestos'>('steel');

    const CASING_PRICES = {
        steel: 500,
        plastic: 300,
        asbestos: 200
    };

    const calculatePrice = () => {
        const basePrice = type === 'sand' ? 2000 : 3500;
        const depthPrice = depth * (type === 'sand' ? 1500 : 3000);
        const casingPrice = CASING_PRICES[casingMaterial] * depth;
        const equipmentPrice = equipment ? 25000 : 0;
        const cleaningPrice = waterCleaning ? 30000 : 0;

        return (basePrice + depthPrice + casingPrice + equipmentPrice + cleaningPrice).toLocaleString('ru-RU');
    };

    // Исправленный обработчик для материала трубы
    const handleCasingChange = (e: React.ChangeEvent<HTMLSelectElement>) => {
        setCasingMaterial(e.target.value as CasingMaterial);
    };

    return (

        <section
            itemScope
            itemType="https://schema.org/OfferCatalog"
            className="container mx-auto px-4 py-8 bg-white rounded-xl shadow-lg">
            <meta itemProp="name" content="Калькулятор стоимости скважин" />
            <meta itemProp="description" content="Точный расчет стоимости бурения в Карелии" />
            <h2 className="text-3xl md:text-4xl font-bold text-[#218CE9] mb-8 text-center">
                Калькулятор стоимости скважины
            </h2>

            <div className="space-y-8 max-w-md mx-auto">
                {/* Тип скважины */}
                <div className="space-y-4">
                    <label className="block text-lg font-medium text-gray-700">Тип скважины:</label>
                    <select
                        value={type}
                        onChange={(e) => setType(e.target.value as 'sand' | 'artesian')}
                        className="w-full p-3 border-2 border-[#218CE9]/20 rounded-lg text-lg focus:ring-2 focus:ring-[#218CE9]"
                    >
                        <option value="sand">Песчаная</option>
                        <option value="artesian">Артезианская</option>
                    </select>
                </div>

                <div className="border-t border-[#218CE9]/20"></div>

                {/* Материал трубы */}
                <div className="space-y-4 pt-4">
                    <label className="block text-lg font-medium text-gray-700">Материал обсадной трубы:</label>
                    <select
                        value={casingMaterial}
                        onChange={handleCasingChange}
                        className="w-full p-3 border-2 border-[#218CE9]/20 rounded-lg text-lg focus:ring-2 focus:ring-[#218CE9]"
                    >
                        <option value="steel">Сталь</option>
                        <option value="plastic">Пластик</option>
                        <option value="asbestos">Асбест</option>
                    </select>
                </div>

                <div className="border-t border-[#218CE9]/20"></div>

                {/* Глубина скважины */}
                <div className="space-y-4 pt-4">
                    <label className="block text-lg font-medium text-gray-700">
                        Глубина скважины: <span className="text-[#218CE9] font-bold">{depth} м</span>
                    </label>
                    <input
                        type="range"
                        min="10"
                        max="200"
                        value={depth}
                        onChange={(e) => setDepth(Number(e.target.value))}
                        className="w-full h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer range-lg"
                    />
                    <div className="flex justify-between text-gray-600 text-sm">
                        <span>10 м</span>
                        <span>200 м</span>
                    </div>
                </div>

                <div className="border-t border-[#218CE9]/20"></div>

                {/* Дополнительные опции */}
                <div className="space-y-4 pt-4">
                    <label className="flex items-center space-x-3">
                        <input
                            type="checkbox"
                            checked={equipment}
                            onChange={(e) => setEquipment(e.target.checked)}
                            className="form-checkbox h-6 w-6 text-[#218CE9] rounded focus:ring-[#218CE9]"
                        />
                        <span className="text-lg text-gray-700">Насосное оборудование (+25 000 ₽)</span>
                    </label>

                    <label className="flex items-center space-x-3">
                        <input
                            type="checkbox"
                            checked={waterCleaning}
                            onChange={(e) => setWaterCleaning(e.target.checked)}
                            className="form-checkbox h-6 w-6 text-[#218CE9] rounded focus:ring-[#218CE9]"
                        />
                        <span className="text-lg text-gray-700">Система очистки воды (+30 000 ₽)</span>
                    </label>
                </div>

                {/* Итоговая цена */}
                <div className="border-t border-[#218CE9]/20 pt-6 mt-6">
                    <div className="flex justify-between items-center">
                        <span className="text-xl md:text-2xl font-bold text-[#218CE9]">Итого:</span>
                        <span className="text-2xl md:text-3xl font-bold text-[#218CE9]">
                            {calculatePrice()} ₽
                        </span>
                    </div>
                </div>
            </div>
        </section>
    );
};

export default PriceCalculator;'use client';
import { useState, useCallback, useEffect } from 'react';
import { FiUser, FiPhone, FiMail, FiMapPin, FiCheckCircle, FiX, FiChevronDown, FiUpload } from 'react-icons/fi';
import { IMaskInput } from 'react-imask';

interface YandexSuggestion {
    title?: {
        text: string;
    };
}

const SUPABASE_URL = process.env.NEXT_PUBLIC_SUPABASE_URL!;
const SUPABASE_KEY = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;

const PriceForm = () => {
    const [name, setName] = useState('');
    const [phone, setPhone] = useState('');
    const [email, setEmail] = useState('');
    const [address, setAddress] = useState('');
    const [addressSuggestions, setAddressSuggestions] = useState<string[]>([]);
    const [isModalOpen, setIsModalOpen] = useState(false);
    const [submittedName, setSubmittedName] = useState('');
    const [isSubmitting] = useState(false);
    const [selectedService, setSelectedService] = useState('');
    const [file, setFile] = useState<File | null>(null);
    const [fileError, setFileError] = useState('');
    const [preferredContact, setPreferredContact] = useState('');

    const services = [
        'Консультация',
        'Бурение скважины',
        'Очистка воды',
        'Монтаж канализации',
        'Подбор оборудования',
        'Химический анализ'
    ];

    const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {
        const selectedFile = e.target.files?.[0];
        if (!selectedFile) return;

        if (selectedFile.size > 5 * 1024 * 1024) {
            setFileError('Максимальный размер файла - 5MB');
            return;
        }

        const allowedTypes = [
            'application/pdf',
            'image/jpeg',
            'image/png',
            'application/msword',
            'application/vnd.openxmlformats-officedocument.wordprocessingml.document'
        ];
        if (!allowedTypes.includes(selectedFile.type)) {
            setFileError('Допустимые форматы: PDF, JPEG, PNG, DOCX');
            return;
        }

        setFile(selectedFile);
        setFileError('');
    };

    useEffect(() => {
        if (selectedService !== 'Очистка воды') {
            setFile(null);
            setFileError('');
        }
    }, [selectedService]);

    const fetchAddressSuggestions = useCallback(async (query: string, signal?: AbortSignal) => {
        if (query.length < 3) {
            setAddressSuggestions([]);
            return;
        }

        try {
            const response = await fetch(`/api/yandexSuggest?query=${encodeURIComponent(query)}`, { signal });
            if (!response.ok) throw new Error(`HTTP error ${response.status}`);

            const data = await response.json();
            const suggestions = (data.results || [])
                .map((item: YandexSuggestion) => item.title?.text || '')
                .filter(Boolean);

            setAddressSuggestions(suggestions);
        } catch (error) {
            if ((error as Error).name !== 'AbortError') {
                console.error("Ошибка подсказок:", error);
            }
        }
    }, []);

    const validateForm = useCallback(() => {
        const errors = [];
        if (!name.trim()) errors.push('Имя');
        if (!phone.match(/^\+7 \(\d{3}\) \d{3}-\d{4}$/)) errors.push('Телефон');
        if (!email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)) errors.push('Email');
        if (!address.trim()) errors.push('Адрес');
        if (!preferredContact.trim()) errors.push('Способ связи');
        return errors;
    }, [name, phone, email, address, preferredContact]);

    const handleSubmit = useCallback(async (e: React.FormEvent) => {
        e.preventDefault();

        if (selectedService === 'Очистка воды') {
            if (!file) {
                setFileError('Необходимо прикрепить файл анализа');
                return;
            }
            if (fileError) return;
        }

        const errors = validateForm();
        if (errors.length > 0) {
            alert('Пожалуйста, проверьте следующие поля: ' + errors.join(', '));
            return;
        }

        let fileUrl = '';
        if (file) {
            const formData = new FormData();
            formData.append('file', file);

            try {
                const uploadResponse = await fetch('/api/upload', {
                    method: 'POST',
                    body: formData,
                });
                const uploadData = await uploadResponse.json();
                fileUrl = uploadData.url;
            } catch (error) {
                console.error('Ошибка загрузки файла:', error);
                alert('Ошибка при загрузке файла');
                return;
            }
        }

        try {
            const response = await fetch(`${SUPABASE_URL}/rest/v1/requests`, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "apikey": SUPABASE_KEY,
                    "Authorization": `Bearer ${SUPABASE_KEY}`,
                    "Prefer": "return=representation"
                },
                body: JSON.stringify({
                    name,
                    phone,
                    email,
                    address,
                    service: selectedService,
                    file_url: fileUrl,
                    preferred_contact: preferredContact
                })
            });

            if (!response.ok) throw new Error(await response.text());

            await fetch('/api/telegramNotify', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    name,
                    phone,
                    email,
                    address,
                    service: selectedService,
                    file_url: fileUrl,
                    preferred_contact: preferredContact
                })
            });

            setSubmittedName(name);
            setIsModalOpen(true);
            resetForm();
        } catch (error) {
            console.error("Ошибка отправки формы:", error);
        }
    }, [name, phone, email, address, validateForm, file, fileError, selectedService, preferredContact]);

    const resetForm = () => {
        setName('');
        setPhone('');
        setEmail('');
        setAddress('');
        setAddressSuggestions([]);
        setPreferredContact('');
    };

    const handleAddressChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {
        const value = e.target.value;
        setAddress(value);

        const controller = new AbortController();
        fetchAddressSuggestions(value, controller.signal);

        return () => controller.abort();
    }, [fetchAddressSuggestions]);

    return (
        <section id="price-form-section" className="container mx-auto px-4 py-8 relative">
            {isModalOpen && (
                <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 animate-fadeIn"
                    onClick={() => setIsModalOpen(false)}>
                    <div className="bg-white rounded-2xl p-8 max-w-md w-[90%] relative">
                        <button onClick={() => setIsModalOpen(false)}
                            className="absolute top-4 right-4 text-[#666] hover:text-[#218CE9]">
                            <FiX size={24} />
                        </button>
                        <div className="text-center">
                            <FiCheckCircle className="text-[#218CE9] w-16 h-16 mx-auto mb-4" />
                            <h3 className="text-2xl font-bold text-[#218CE9] mb-2">Заявка принята!</h3>
                            <p className="text-[#666]">Спасибо, {submittedName}! Мы свяжемся с вами в ближайшее время.</p>
                        </div>
                    </div>
                </div>
            )}

            <h2 className="text-2xl md:text-3xl font-bold text-[#218CE9] mb-4 text-center">
                Оставьте заявку
            </h2>

            <div className="bg-[#F5F5F5] rounded-xl mx-auto px-4 py-8">
                <form onSubmit={handleSubmit} className="space-y-6 max-w-2xl mx-auto">
                    <div className="relative">
                        <label className="block text-sm font-medium text-[#666] mb-2 ml-4">
                            Выберите услугу
                        </label>
                        <div className="relative">
                            <select
                                value={selectedService}
                                onChange={(e) => setSelectedService(e.target.value)}
                                className="w-full pl-12 pr-4 py-4 border-2 border-[#218CE9]/20 rounded-[62px] 
                        bg-white text-gray-700 focus:ring-2 focus:ring-[#218CE9]
                        appearance-none focus:outline-none"
                                required
                            >
                                <option value="">-- Выберите услугу --</option>
                                {services.map((service, index) => (
                                    <option key={index} value={service}>{service}</option>
                                ))}
                            </select>
                            <FiChevronDown className="absolute right-4 top-1/2 -translate-y-1/2 text-[#666]" />
                        </div>
                    </div>

                    {/* Новое поле для выбора способа связи */}
                    <div className="relative">
                        <label className="block text-sm font-medium text-[#666] mb-2 ml-4">
                            Выберите предпочитаемый способ связи
                        </label>
                        <div className="relative">
                            <select
                                value={preferredContact}
                                onChange={(e) => setPreferredContact(e.target.value)}
                                className="w-full pl-12 pr-4 py-4 border-2 border-[#218CE9]/20 rounded-[62px] bg-white text-gray-700 focus:ring-2 focus:ring-[#218CE9] appearance-none focus:outline-none"
                                required
                            >
                                <option value="">-- Выберите способ связи --</option>
                                <option value="phone">Звонок по номеру телефона</option>
                                <option value="telegram">Telegram</option>
                                <option value="whatsapp">WhatsApp</option>
                            </select>
                            <FiChevronDown className="absolute right-4 top-1/2 -translate-y-1/2 text-[#666]" />
                        </div>
                    </div>

                    {[
                        {
                            icon: FiUser,
                            placeholder: 'Ваше имя',
                            component: (
                                <IMaskInput
                                    mask={/^[A-Za-zА-Яа-яЁё\s-]*$/}
                                    placeholder="Ваше имя"
                                    value={name}
                                    onAccept={(value) => setName(value)}
                                    className="w-full pl-12 pr-4 py-4 border border-[#ddd] rounded-[62px] focus:outline-none focus:border-[#218CE9]"
                                    required
                                />
                            )
                        },
                        {
                            icon: FiPhone,
                            placeholder: '+7 (___) ___-____',
                            component: (
                                <IMaskInput
                                    mask="+7 (000) 000-0000"
                                    placeholder="+7 (___) ___-____"
                                    value={phone}
                                    onAccept={(value) => setPhone(value.toString())}
                                    className="w-full pl-12 pr-4 py-4 border border-[#ddd] rounded-[62px] focus:outline-none focus:border-[#218CE9]"
                                    required
                                />
                            )
                        },
                        {
                            icon: FiMail,
                            placeholder: 'Ваш email',
                            component: (
                                <IMaskInput
                                    mask={/^[\w-.@]*$/}
                                    placeholder="Ваш email"
                                    value={email}
                                    onAccept={(value) => {
                                        if (value.length <= 254) setEmail(value);
                                    }}
                                    className="w-full pl-12 pr-4 py-4 border border-[#ddd] rounded-[62px] focus:outline-none focus:border-[#218CE9]"
                                    required
                                />
                            )
                        },
                        {
                            icon: FiMapPin,
                            placeholder: 'Адрес проведения работ',
                            component: (
                                <input
                                    type="text"
                                    placeholder="Адрес проведения работ"
                                    value={address}
                                    onChange={handleAddressChange}
                                    className="w-full pl-12 pr-4 py-4 border border-[#ddd] rounded-[62px] focus:outline-none focus:border-[#218CE9]"
                                    required
                                />
                            ),
                            suggestions: addressSuggestions
                        }
                    ].map((field, index) => (
                        <div key={index} className="relative">
                            <field.icon className="absolute left-4 top-1/2 -translate-y-1/2 text-[#666]" />
                            {field.component}
                            {field.suggestions && field.suggestions.length > 0 && (
                                <ul className="absolute bg-white border border-[#ddd] rounded-lg mt-2 w-full shadow-md z-10">
                                    {field.suggestions.map((suggestion, idx) => (
                                        <li
                                            key={idx}
                                            className="p-2 hover:bg-[#f0f0f0] cursor-pointer"
                                            onClick={() => {
                                                setAddress(suggestion);
                                                setAddressSuggestions([]);
                                            }}
                                        >
                                            {suggestion}
                                        </li>
                                    ))}
                                </ul>
                            )}
                        </div>
                    ))}

                    <div className="relative">
                        {selectedService === 'Очистка воды' && (
                            <label className="block text-sm font-medium text-[#666] mb-2 ml-4">
                                Прикрепить файл (анализ воды) *
                            </label>
                        )}

                        {selectedService === 'Очистка воды' && (
                            <div className="relative group">
                                <input
                                    type="file"
                                    onChange={handleFileUpload}
                                    className="w-full opacity-0 absolute z-20 cursor-pointer h-full"
                                    id="fileInput"
                                    accept=".pdf,.doc,.docx,image/*"
                                    required
                                />
                                <label
                                    htmlFor="fileInput"
                                    className="block w-full pl-12 pr-4 py-4 border-2 border-[#218CE9]/20 
          rounded-[62px] bg-white text-gray-400 cursor-pointer
          group-hover:border-[#218CE9]/40 transition-all"
                                >
                                    {file ? file.name : 'Выберите файл...'}
                                </label>
                                <FiUpload className="absolute left-4 top-1/2 -translate-y-1/2 text-[#666]" />
                            </div>
                        )}

                        {fileError && (
                            <p className="text-red-500 text-sm mt-2 ml-4">{fileError}</p>
                        )}

                        {file && (
                            <p className="text-green-600 text-sm mt-2 ml-4">
                                ✓ Файл загружен: {file.name}
                            </p>
                        )}
                    </div>

                    <button
                        type="submit"
                        disabled={isSubmitting}
                        className={`w-full py-4 rounded-[62px] font-bold transition-colors ${isSubmitting
                            ? 'bg-gray-400 cursor-not-allowed'
                            : 'bg-[#218CE9] text-white hover:bg-[#1a70c0]'
                            }`}
                    >
                        {isSubmitting ? 'Отправка...' : 'Отправить заявку'}
                    </button>
                </form>
            </div>
        </section>
    );
};

export default PriceForm;
// components/SchemaOrganization.tsx
export const SchemaOrganization = () => (
    <script type="application/ld+json">
      {JSON.stringify({
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "АкваСервис",
        "url": "https://aqua-service-karelia.ru/",
        "logo": "https://aqua-service-karelia.ru/images/logo.png",
        "contactPoint": {
          "@type": "ContactPoint",
          "telephone": "+7-8142-27-05-45",
          "contactType": "customer service"
        }
      })}
    </script>
  );// components/ServiceCard.tsx
'use client';
import Image from "next/image";
import Link from 'next/link';

interface Service {
  id: number;
  title: string;
  description: string;
  price: number;
  image_url: string;
  area_served: string[] | null;
  slug: string;
}

interface ServiceCardProps {
  service: Service;
}

export default function ServiceCard({ service }: ServiceCardProps) {
  // Создаем безопасную версию массива
  const areas = service.area_served || [];

  return (
    <Link
      href={`/services/${service.slug}`}
      className="..."
    >
      <div className="bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow flex flex-col h-full">

        <div itemScope itemType="https://schema.org/Service">
          <meta itemProp="serviceType" content={service.title} />
          <div itemProp="provider" itemScope itemType="https://schema.org/Organization">
            <meta itemProp="name" content="АкваСервис" />
          </div>
          {areas.map((area, i) => (
            <meta key={i} itemProp="areaServed" content={area} />
          ))}
        </div>

        {service.image_url && (
          <div className="relative h-48 w-full overflow-hidden rounded-t-lg">
            <Image
              src={service.image_url}
              alt={service.title}
              fill
              className="object-cover"
              sizes="(max-width: 768px) 100vw, 33vw"
              itemProp="image"
            />
          </div>
        )}

        <div className="p-6 flex flex-col flex-grow">
          <h2 className="text-xl font-bold text-[#218CE9] mb-2" itemProp="name">
            {service.title}
          </h2>

          <p className="text-gray-600 mb-4 flex-grow" itemProp="description">
            {service.description}
          </p>

          <div className="mt-auto">
            <span
              className="font-bold text-[#218CE9] text-lg"
              itemProp="offers"
              itemScope
              itemType="https://schema.org/Offer"
            >
              <meta itemProp="priceCurrency" content="RUB" />
              <span itemProp="price">{service.price.toLocaleString('ru-RU')}</span> ₽
            </span>

            {/* Безопасное отображение городов */}
            <div className="mt-2 text-sm text-gray-500">
              Доступно в: {areas.length > 0 ? areas.join(', ') : 'Все регионы'}
            </div>
          </div>
        </div>
      </div>
    </Link>

  );
}// components/ServicesSlider.tsx - Слайдер услуг на главной странице (app/page.tsx)
"use client";
import React, { useEffect, useState } from "react";
import useEmblaCarousel from "embla-carousel-react";
import Autoplay from "embla-carousel-autoplay";
import { WheelGesturesPlugin } from "embla-carousel-wheel-gestures";
import Image from "next/image";
import Link from "next/link";
import { supabase } from '@/lib/supabase';
import { useRouter } from 'next/navigation';

// Тип данных для услуг из Supabase
interface Service {
  id: string;
  title: string;
  description: string;
  price: string;
  image_url: string;
  slug: string;
}

const ServicesSlider = () => {
  const router = useRouter(); // Инициализируем роутер

  // Состояния компонента
  const [services, setServices] = useState<Service[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const [selectedIndex, setSelectedIndex] = useState(0);

  // Инициализация слайдера
  const [emblaRef, emblaApi] = useEmblaCarousel(
    {
      loop: true,
      align: "start",
      breakpoints: {
        "(min-width: 640px)": { slidesToScroll: 1 },
        "(min-width: 1024px)": { slidesToScroll: 1 }
      }
    },
    [WheelGesturesPlugin(), Autoplay({ delay: 5000, stopOnMouseEnter: true, stopOnInteraction: false })]
  );

  // Загрузка данных при монтировании
  useEffect(() => {
    const fetchServices = async () => {
      console.log('Fetching services...');
      try {
        const { data, error } = await supabase
          .from('services')
          .select('*');
        console.log('Data received:', data);

        if (error) throw error;
        setServices(data || []);
      } catch (err) {
        console.error('Ошибка загрузки:', JSON.stringify(err, null, 2));
        setError('Не удалось загрузить услуги');
      } finally {
        setLoading(false);
      }
    };

    fetchServices();
  }, []);

  // Обработчик изменения слайда
  useEffect(() => {
    if (!emblaApi) return;
    const updateIndex = () => setSelectedIndex(emblaApi.selectedScrollSnap());
    emblaApi.on("select", updateIndex);
    return () => {
      emblaApi.off("select", updateIndex);
    };
  }, [emblaApi]);


  // Состояния загрузки
  if (loading) {
    return (
      <div className="text-center py-12">
        <div className="animate-spin inline-block w-8 h-8 border-4 rounded-full border-t-blue-500"></div>
      </div>
    );
  }

  // Обработка ошибок
  if (error) {
    return (
      <div className="text-red-500 text-center py-8">
        {error}. Попробуйте обновить страницу
      </div>
    );
  }

  return (
    <section className="px-4 py-8 container mx-auto">
      <div className="border-b border-black/10 mb-8"></div>

      <h2 className="text-center font-bold text-3xl text-[#218CE9] mb-8">
        НАШИ УСЛУГИ
      </h2>

      <div className="flex items-center gap-4">
        {/* Кнопка назад */}
        <button
          onClick={() => emblaApi?.scrollPrev()}
          className="hidden md:flex items-center justify-center w-10 h-10 rounded-full bg-white shadow-lg hover:scale-110 transition-transform"
        >
          <svg className="w-6 h-6 text-[#218CE9]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 19l-7-7 7-7" />
          </svg>
        </button>

        {/* Контейнер слайдов */}
        <div className="py-4 embla overflow-hidden flex-1" ref={emblaRef}>
          <div className="embla__container flex gap-3">
            {services.map((service) => (
              <div
                className="embla__slide flex-[0_0_280px]"
                key={service.id}
              >
                <article className="bg-white rounded-xl shadow-md hover:shadow-lg transition-shadow h-full flex flex-col">
                  <div className="relative h-60">
                    <Image
                      src={service.image_url}
                      alt={service.title}
                      fill
                      className="object-cover rounded-t-xl"
                      sizes="(max-width: 768px) 100vw, 50vw"
                    />
                  </div>

                  <div className="p-4 flex flex-col flex-grow">
                    <h3 className="text-xl font-bold text-[#218CE9] mb-2">
                      {service.title}
                    </h3>

                    <p className="text-gray-600 text-sm mb-4 flex-grow">
                      {service.description}
                    </p>

                    <div className="mt-auto">
                      <p className="text-lg font-bold text-[#218CE9] mb-3">
                        от {service.price} ₽
                      </p>
                      <Link
                        href={`/services/${service.slug}`}
                        className="block w-full bg-[#218CE9] text-white py-2 rounded-lg hover:bg-[#1a6fb9] transition-colors text-center"
                        onMouseEnter={() => router.prefetch(`/services/${service.slug}`)}
                      >
                        Заказать
                      </Link>
                    </div>
                  </div>
                </article>
              </div>
            ))}
          </div>
        </div>

        {/* Кнопка вперед */}
        <button
          onClick={() => emblaApi?.scrollNext()}
          className="hidden md:flex items-center justify-center w-10 h-10 rounded-full bg-white shadow-lg hover:scale-110 transition-transform"
        >
          <svg className="w-6 h-6 text-[#218CE9]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 5l7 7-7 7" />
          </svg>
        </button>
      </div>

      {/* Пагинация */}
      <div className="flex justify-center gap-2 mt-6">
        {services.map((_, index) => (
          <button
            key={index}
            onClick={() => emblaApi?.scrollTo(index)}
            className={`w-2 h-2 rounded-full transition-opacity ${selectedIndex === index ? 'opacity-100' : 'opacity-30'
              } bg-[#218CE9]`}
          />
        ))}
      </div>

      {/* Кнопка "Посмотреть все" */}
      <div className="flex justify-center mt-8">
        <Link
          href="/services"
          className="bg-[#218CE9] text-white px-6 py-2 rounded-full hover:bg-[#1a6fb9] transition-colors"
        >
          Все услуги →
        </Link>
      </div>
    </section>
  );
};

export default ServicesSlider;// src/app/components/WorkSteps.tsx
'use client'
import React from 'react'

interface Step {
  title: string;
  content: React.ReactNode;
}

interface WorkStepsProps {
  steps?: Step[];
  title?: string;
  subtitle?: string;
}

const WorkSteps: React.FC<WorkStepsProps> = ({
  steps,
  title = "КАК МЫ РАБОТАЕМ",
  subtitle = "Этапы работы — от заявки до чистой воды"
}) => {
  const defaultSteps: Step[] = [
    {
      title: 'Выезд инженера',
      content: (
        <ul className="list-disc pl-5 space-y-2">
          <li>Анализ грунта, подбор типа скважины</li>
        </ul>
      )
    },
    {
      title: 'Заключение договора',
      content: (
        <ul className="list-disc pl-5 space-y-2">
          <li>Фиксируем сроки, стоимость, гарантии.</li>
          <li>Без скрытых платежей.</li>
        </ul>
      )
    },
    {
      title: 'Бурение и обустройство',
      content: (
        <ul className="list-disc pl-5 space-y-2">
          <li>Используем сертифицированные материалы</li>
          <li>Минимизируем шум и грязь</li>
        </ul>
      )
    },
    {
      title: 'Пусконаладочные работы',
      content: (
        <ul className="list-disc pl-5 space-y-2">
          <li>Проверяем дебет воды</li>
          <li>Устанавливаем оборудование</li>
        </ul>
      )
    },
    {
      title: 'Сдача объекта',
      content: (
        <ul className="list-disc pl-5 space-y-2">
          <li>Подписываем акт приемки</li>
          <li>Выдаем паспорт скважины</li>
        </ul>
      )
    }
  ];

  const displayedSteps = steps || defaultSteps;

  return (
    <section className="container mx-auto px-4 py-8">
      <div className="border-b border-black border-opacity-10 mb-8"></div>

      <h2 className="text-3xl md:text-4xl font-bold text-[#218CE9] text-center mb-6">
        {title}
      </h2>
      
      <h3 className="text-xl text-center text-[#666] mb-8">
        {subtitle}
      </h3>

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
        {displayedSteps.slice(0, 3).map((step, index) => (
          <div 
            key={index}
            className="bg-[#F5F5F5] rounded-xl p-6 shadow-lg flex flex-col h-full"
          >
            <div className="flex gap-4 mb-4 items-center">
              <div className="w-8 h-8 bg-[#218CE9] text-white rounded-full flex items-center justify-center flex-shrink-0">
                {index + 1}
              </div>
              <h4 className="text-xl font-bold text-[#218CE9]">
                {step.title}
              </h4>
            </div>
            <div className="text-[#666] flex-grow">
              {step.content}
            </div>
          </div>
        ))}

        <div className="lg:col-span-3 flex flex-col lg:flex-row gap-8">
          {displayedSteps.slice(3).map((step, index) => (
            <div 
              key={index + 3}
              className="bg-[#F5F5F5] rounded-xl p-6 shadow-lg flex flex-col h-full w-full"
            >
              <div className="flex gap-4 mb-4 items-center">
                <div className="w-8 h-8 bg-[#218CE9] text-white rounded-full flex items-center justify-center flex-shrink-0">
                  {index + 4}
                </div>
                <h4 className="text-xl font-bold text-[#218CE9]">
                  {step.title}
                </h4>
              </div>
              <div className="text-[#666] flex-grow">
                {step.content}
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>
  )
}

export default WorkSteps